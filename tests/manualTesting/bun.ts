import { BunRandomnessPredictor, SafariRandomnessPredictor } from "../../src/predictors";

const SEQ_ARRAY_FROM = [0.1584019859484701, 0.5889908981279809, 0.5707594257373063, 0.2013679022755892];
const EXPECTED_ARRAY_FROM = [
  0.22608010770344233, 0.6271766206083508, 0.982945852940786, 0.17311426646362216, 0.7612493609526688, 0.36855644622412276, 0.16106664697250717,
  0.4819446119083074, 0.28600821056136283, 0.48136520285701956,
];

const SEQ_MATH_RANDOM = [0.1399695243228144, 0.2014387671401643, 0.5305147829755276, 0.40869883030943166];
const EXP_MATH_RANDOM = [
  0.7208689709272236, 0.25435595786540255, 0.4120472933967687, 0.9931906335355927, 0.3605072878681843, 0.07740883327663006, 0.3845007845910927,
  0.0006116039135406481, 0.7945175319163787, 0.2676487652727588,
];

const SEQ_REPL_ARRAY_FROM = [0.1879561997434812, 0.9696638899742118, 0.8999015831921182, 0.15767627277617247];
const EXP_REPL_ARRAY_FROM = [
  0.8814891927586603, 0.26957741879551234, 0.0662280044493414, 0.5203060860154335, 0.7156866413771543, 0.3395674692265831, 0.43468239915797724,
  0.45853673597361955, 0.2725801467208847, 0.881593673939987,
];
const SEQ_REPL_MATH_RANDOM = [0.2706624766889473, 0.527873627815387, 0.19488653995655314, 0.5975612586430014];
const EXP_REPL_MATH_RANDOM = [
  0.19006852635524452, 0.5603843306948109, 0.10325369385339978, 0.550933841219919, 0.7839207772284974, 0.2387365891076061, 0.5578411892707478,
  0.8566587007257023, 0.359662000709565, 0.5298349140555374,
];

const SEQ_STANDALONE = [0.7042323347225529, 0.33639563265249306, 0.04292855281576369, 0.8676120027841034];

const SEQ_SHOULD_ERROR_ARRAY_FROM__BUN_BUILD_JSC = [0.3245944240043197, 0.47441126493618446, 0.7245381218992747, 0.07637625872999099];
const EXP_SHOULD_ERROR_MATH_RANDOM_STANDALONE__BUN_BUILD_JSC = [
  0.7755521907857078, 0.18564776144097983, 0.23460639194608224, 0.8426905194426084, 0.019931652792494314, 0.6131810790503178, 0.3954094991960735,
  0.1114244614334724, 0.9112895805320159, 0.9288133425284982,
];

const SEQ_FROM_SAFARI_CONSOLE = [
  0.8970959225188749, 0.8367703941558914, 0.9658064490810131, 0.4322389149330612, 0.6483154462604718, 0.013864472210914358, 0.2639232224263931,
  0.6299821201707492, 0.9012072872565672, 0.9714925922706569,
];
const EXP_FROM_SAFARI_CONSOLE = [0.2803390852004144, 0.7772771318480789, 0.9199848419788711, 0.35111560976654477, 0.3839554793421598];

/*
bun -e "
const sequence = Array.from({ length: 4 }, Math.random);

const expected = [
  Math.random(),
  Math.random(),
  Math.random(),
  Math.random(),
  Math.random(),
  Math.random(),
  Math.random(),
  Math.random(),
  Math.random(),
  Math.random(),
];

console.log(sequence);
console.log(expected);
"
*/
const SEQ_BUN_TAC_E = [0.621555743262675, 0.06808303060956822, 0.05858938494499022, 0.9981014963164767];
const EXP_BUN_TAC_E = [
  0.5400579638527501, 0.31612502279005805, 0.21970366560465338, 0.7402339215475255, 0.28328582715716055, 0.047681322475749854, 0.6226225423920729,
  0.45969100219328907, 0.4102632662719078, 0.6762684850215855,
];

const SEQ_FROM_SCRIPT = [0.46968111141955526, 0.8450319945290244, 0.6552304674837379, 0.9193972599064721];
const EXP_FROM_SCRIPT = [
  0.7904439851471128, 0.7372533002315309, 0.6911463525273678, 0.889218920334725, 0.23669897072063795, 0.2696986991592075, 0.8865596811727501,
  0.5783541047263386, 0.6623917656729934, 0.960905499929654,
];

const SEQ_FROM_REPL = [0.49847673878798937, 0.9749122464918093, 0.5139434853303968, 0.8229764863585278];
const EXP_FROM_REPL = [
  0.23170905116564966, 0.28083978520436903, 0.15196714455502836, 0.7022539290581968, 0.21809482803941904, 0.5292643259176475, 0.28913090138421693,
  0.7232130859973437, 0.5453965090475531, 0.3725912303081951,
];

Main();
async function Main() {
  const SEQUENCE = SEQ_FROM_REPL;
  const EXPECTED = EXP_FROM_REPL;

  try {
    const bun = new BunRandomnessPredictor(SEQUENCE);
    const bunPredictions: number[] = [];
    for (let i = 0; i < EXPECTED.length; i++) {
      bunPredictions.push(await bun.predictNext());
    }
    console.log(
      { predictions: bunPredictions, EXPECTED },
      "\n",
      bunPredictions.every((v, i) => EXPECTED[i] === v),
    );
  } catch (e) {
    console.log(e);
  }
}
